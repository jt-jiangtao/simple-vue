{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/observer/watcher.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["// 我要重写数组的那些方法 7个 push shift unshift pop reverse sort splice 会导致数组本身发生变化\r\n// slice()\r\n\r\n// 拿到数组原型上的方法（原来的方法）\r\nlet oldArrayMethods = Array.prototype;\r\n// value.__proto__ = arrayMethods 原型链查找的问题， 会向上查找，先查找我重写的，重写的没有会继续向上查找\r\n// arrayMethods.__proto__ = oldArrayMethods\r\n// Object.create 创建新对象，并使用原有的对象来提供新创建的对象的__proto__\r\nexport const arrayMethods = Object.create(oldArrayMethods);\r\n\r\nconst methods = [\r\n    'push',\r\n    'shift',\r\n    'unshift',\r\n    'pop',\r\n    'sort',\r\n    'splice',\r\n    'reverse'\r\n]\r\n\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args){\r\n        // 当调用劫持后的方法 页面应该更新\r\n\r\n\r\n        console.log(\"array-->\")\r\n        // this谁调用该方法this为谁\r\n        // this为Observer中的data\r\n        const result = oldArrayMethods[method].apply(this, arguments);\r\n        let inserted;\r\n\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            // 新增时可能会存在Object\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;\r\n                break;\r\n            case 'splice': // vue.$set原理\r\n                args.slice(2); // arr.splice(0, 1, {a: 1})\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (inserted) ob.observeArray(inserted);\r\n        ob.dep.notify()\r\n        return result;\r\n    }\r\n})","export function proxy(vm, data, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get(){\r\n            return vm[data][key]\r\n        },\r\n        set(newValue){\r\n            vm[data][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\nexport function defineProperty(data, key, value){\r\n    Object.defineProperty(data, key,{\r\n        enumerable: false, // 不能被枚举，不能被循环出来 for...in\r\n        configurable: false, // delete\r\n        value,\r\n        writable: false\r\n    })\r\n}\r\n\r\nconst LIFECYCLE_HOOKS = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    'beforeUpdate',\r\n    'updated',\r\n    'beforeDestroy',\r\n    'destroyed'\r\n]\r\n\r\nlet strats = {}\r\n\r\nfunction mergeHook(parentVal, childVal){\r\n    if(childVal){\r\n        if(parentVal){\r\n            return parentVal.concat(childVal);\r\n        }else{\r\n            return [childVal];\r\n        }\r\n    }else{\r\n        return parentVal;\r\n    }\r\n}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook=>{\r\n    strats[hook] = mergeHook\r\n})\r\n\r\nexport function mergeOptions(parent, child){\r\n    const options = {}\r\n    for(let key in parent){\r\n        mergeField(key)\r\n    }\r\n    for (let key in child){\r\n        if (!parent.hasOwnProperty(key)){\r\n            mergeField(key)\r\n        }\r\n    }\r\n    // 浅合并\r\n    function mergeField(key){\r\n        if (strats[key]){\r\n            return options[key] = strats[key](parent[key], child[key])\r\n        }\r\n        if (typeof parent[key] === 'object' && typeof  child[key] === 'object'){\r\n            options[key] = {\r\n                ...parent[key],\r\n                ...child[key]\r\n            }\r\n        }else if (child[key] == null){\r\n            options[key] = parent[key]\r\n        }else {\r\n            options[key] = child[key]\r\n        }\r\n    }\r\n    return options\r\n}\r\n\r\nlet callbacks = []\r\n\r\nfunction flushCallbacks() {\r\n    while (callbacks.length){\r\n        let cb = callbacks.pop()\r\n        cb()\r\n    }\r\n    pending = false\r\n}\r\nlet timerFunc;\r\nif (Promise) {\r\n    timerFunc = () => {\r\n        Promise.resolve().then(flushCallbacks)\r\n    };\r\n} else if (MutationObserver) { // 可以监控dom变化，监控完毕后异步更新\r\n    let observe = new MutationObserver(flushCallbacks)\r\n    let textNode = document.createTextNode(1)\r\n    observe.observe(textNode, {characterData: true})\r\n    timerFunc = () => {\r\n        textNode.textContent = 2\r\n    }\r\n}else if (setImmediate){\r\n    timerFunc = ()=>{\r\n        setImmediate(flushCallbacks)\r\n    }\r\n}else {\r\n    timerFunc = ()=>{\r\n        setTimeout(flushCallbacks)\r\n    }\r\n}\r\nlet pending = false\r\n// 核心为异步方法\r\nexport function nextTick(cb){\r\n    callbacks.push(cb)\r\n    if (!pending){\r\n        timerFunc();\r\n        pending = true\r\n    }\r\n}\r\n","let id = 0;\r\nclass Dep { // 收集模板中的{{}}对应的watcher\r\n    constructor() {\r\n        // watcher去重\r\n        this.subs = []\r\n        this.id = id ++\r\n    }\r\n\r\n    // 渲染时调用收集依赖，一个渲染位对应一个dep\r\n    depend() {\r\n        // this.subs.push(Dep.target) // 这样出现多个{{name}}时，会保存多次，更新name时会重复渲染多次\r\n        Dep.target.addDep(this)\r\n    }\r\n\r\n    addSub(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n\r\n    notify(){\r\n        this.subs.forEach(watcher => watcher.update())\r\n    }\r\n}\r\n\r\n// 多对多大关系 一个属性有一个dep是用来收集watcher的\r\n// dep可以存多个watcher vm.$watch('name')\r\n// 一个watcher可以对应多个dep\r\n\r\nDep.target = null;\r\n\r\nexport function pushTarget(watcher){\r\n    Dep.target = watcher\r\n}\r\n\r\nexport function popTarget(){\r\n    Dep.target = null // 渲染完成后将target删除\r\n}\r\n\r\nexport default Dep\r\n","import {arrayMethods} from \"./array\";\r\nimport {defineProperty} from \"../utils\";\r\nimport Dep from \"./dep\";\r\n\r\n\r\nclass Observer {\r\n    constructor(data) {\r\n        this.dep = new Dep()\r\n\r\n        // 判断一个对象是否被观测过: 是否含有__ob__属性\r\n\r\n        defineProperty(data, '__ob__' , this);\r\n\r\n        // data.__ob__ = this\r\n\r\n        // 使用defineProperty重新定义属性\r\n        if (Array.isArray(data)) {\r\n            // push shift unshift splice sort reverse pop\r\n            // 函数劫持 切片编程\r\n            data.__proto__ = arrayMethods;\r\n            // 观测数组中的对象类型\r\n            this.observeArray(data)\r\n        }else {\r\n            this.walk(data);\r\n        }\r\n    }\r\n\r\n    walk(data) {\r\n        let keys = Object.keys(data);\r\n        keys.forEach(key=>{\r\n            defineReactive(data, key, data[key]); // 将数据定义为响应式数据\r\n        })\r\n    }\r\n\r\n    observeArray(data) {\r\n        data.forEach(item => {\r\n            observe(item)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n    // 获取到数组对应的dep\r\n    let childDep = observe(value)\r\n\r\n    let dep = new Dep() // 每个属性都有dep\r\n\r\n    Object.defineProperty(data, key, {\r\n        get(){ // 依赖收集\r\n            console.log(\"get---> \", key)\r\n            if (Dep.target){\r\n                dep.depend()\r\n                if (childDep){\r\n                    // 默认给数组和对象增加了dep属性\r\n                    childDep.dep.depend()\r\n                }\r\n            }\r\n            // 注意引用\r\n            return value\r\n        },\r\n        set(newValue){ // 依赖更新\r\n            console.log(\"set---> \", key, newValue)\r\n            if (newValue === value) return;\r\n            observe(newValue)\r\n            value = newValue;\r\n\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n\r\n// 只观测原来存在的数据\r\nexport function observe(data) {\r\n    // typeof null 也是object\r\n\r\n    // 不能不是对象，并且不是null\r\n    if (typeof data !== 'object' || data === null) {\r\n        return;\r\n    }\r\n    if (data.__ob__) return data;\r\n    return new Observer(data);\r\n}","import {popTarget, pushTarget} from \"./dep\";\r\nimport {nextTick} from \"../utils\";\r\n\r\nlet id = 0\r\n\r\n// watcher负责渲染\r\nclass Watcher {\r\n    constructor(vm, exprOrFn, cb, options) {\r\n        this.vm = vm;\r\n        this.exprOrFn = exprOrFn;\r\n        this.cb = cb;\r\n        this.options = options\r\n        this.user = options.user // 这是一个用户watcher\r\n        this.isWatcher = typeof options === 'boolean'\r\n        this.id = id++ // watcher的唯一标识\r\n        this.deps = []\r\n        this.depsId = new Set()\r\n\r\n        // 如果是渲染watcher那么exprOrFn为重新渲染函数\r\n        // 用户watcher的话为key即属性名称\r\n        if (typeof exprOrFn == 'function') {\r\n            this.getter = exprOrFn\r\n        }else {\r\n            this.getter = function (){ // 可能传递过来的是一个字符串w\r\n                // 当去当前示例上取值时 才会触发依赖收集\r\n                let path = exprOrFn.split('.')\r\n                let obj = vm\r\n                for (let i = 0; i < path.length; i++) {\r\n                    obj = obj[path[i]]\r\n                }\r\n                // obj为old value\r\n                return obj\r\n            }\r\n        }\r\n\r\n        // 默认先调用一次get方法 进行取值 将结果保留\r\n        this.value = this.get()\r\n    }\r\n\r\n    get() {\r\n        pushTarget(this)\r\n        let result = this.getter() // 渲染页面要取值，get方法\r\n        popTarget()\r\n        return result\r\n    }\r\n\r\n    update() {\r\n\r\n        // 不要每次都调用get方法，get方法会非常消耗性能\r\n        queueWatcher(this);\r\n        // this.get() // 重新渲染\r\n    }\r\n\r\n    run() {\r\n        // 再一次取值，为修改之后的\r\n        let newValue = this.get();\r\n        // 第一次取值之后保留的\r\n        let oldValue = this.value;\r\n        this.value = newValue\r\n        if (this.user){\r\n            this.cb.call(this.vm, newValue, oldValue)\r\n        }\r\n    }\r\n\r\n    addDep(dep) {\r\n        let id = dep.id\r\n        if (!this.depsId.has(id)) {\r\n            this.deps.push(dep)\r\n            this.depsId.add(id)\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n}\r\n\r\n// 将需要批量更新的watcher放到一个队列中，稍后watcher执行\r\nlet queue = []\r\nlet has = {};\r\nlet pending = false\r\n\r\nfunction flushSchedulerQueue() {\r\n    queue.forEach(watcher => {\r\n        watcher.run();\r\n        if (!watcher.user){\r\n            watcher.cb()\r\n        }\r\n    })\r\n    queue = []\r\n    has = {}\r\n    pending = false\r\n}\r\n\r\nfunction queueWatcher(watcher) {\r\n    const id = watcher.id\r\n    if (has[id] == null) {\r\n        queue.push(watcher)\r\n        has[id] = true\r\n\r\n        // 等待所有代码同步完毕后执行\r\n        if (!pending) { // 防抖处理\r\n            nextTick(flushSchedulerQueue)\r\n            pending = true\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher\r\n","import {observe} from \"./observer/index\";\r\nimport {nextTick, proxy} from \"./utils\";\r\nimport Watcher from \"./observer/watcher\";\r\n\r\nexport function initState(vm) {\r\n    const  opts = vm.$options;\r\n\r\n    if (opts.props) {\r\n        initProps(vm);\r\n    }\r\n    if (opts.methods) {\r\n        initMethod(vm);\r\n    }\r\n    if (opts.data) {\r\n        initData(vm);\r\n    }\r\n    if (opts.computed) {\r\n        initComputed(vm);\r\n    }\r\n    if (opts.watch) {\r\n        initWatch(vm);\r\n    }\r\n}\r\n\r\nfunction initProps(vm) {\r\n\r\n}\r\n\r\nfunction initMethod(vm) {\r\n\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    vm._data = data =  typeof data == 'function' ? data.call(vm) : data;\r\n    // 数据的劫持方案 对象Object.defineProperty\r\n    // 数组 单独处理\r\n\r\n    // 当从vm上取值时，将属性代理到vm._data上面\r\n    // 对vm做代理\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key);\r\n    }\r\n    observe(data)\r\n}\r\n\r\nfunction initComputed(vm) {}\r\n\r\nfunction initWatch(vm) {\r\n    let watch = vm.$options.watch\r\n    for (let key in watch){\r\n        const handler = watch[key]\r\n        if (Array.isArray(handler)){\r\n            handler.forEach(handle => {\r\n                createWatcher(vm, key, handle)\r\n            })\r\n        }else {\r\n            createWatcher(vm, key, handler) // 对象 字符串 函数\r\n        }\r\n    }\r\n}\r\n\r\nfunction createWatcher(vm, exprOrFn, handler, options){ // options可以用来标识用户watcher\r\n    if (typeof handler == 'object'){\r\n        options = handler\r\n        handler = handler.handler\r\n    }\r\n    if (typeof handler == 'string'){\r\n        handler = vm.$options.methods[handler]\r\n    }\r\n    // key handler options\r\n    return vm.$watch(exprOrFn, handler, options)\r\n}\r\n\r\nexport function stateMixin(Vue){\r\n    Vue.prototype.$nextTick = function (cb) {\r\n        nextTick(cb)\r\n    }\r\n    Vue.prototype.$watch = function (exprOrFn, cb, options) {\r\n        // 数据应该依赖这个watcher 数据变化后应该让这个watcher重新执行\r\n        let watcher = new Watcher(this, exprOrFn, cb, {...options, user: true});\r\n        if (options && options.immediate){\r\n            cb()\r\n        }\r\n    }\r\n}\r\n","// let ast = {\r\n//     tag: \"div\",\r\n//     parent: null,\r\n//     type: 1,\r\n//     attrs: [],\r\n//     children: [{\r\n//         tag: null,\r\n//         parent: \"parent div\",\r\n//         attrs: [],\r\n//         text: \"hello {{name}}\"\r\n//     },{\r\n//\r\n//     }]\r\n// }\r\n// <div id=\"app\">hello {{name}} <span>world</span></div>\r\n\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // abc-aaa 匹配标签名\r\n// ?:匹配不捕获\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // <aaa:asdads>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >  <div>\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g  // {{}}\r\n\r\n// 通过树和栈\r\nfunction createASTElement(tagName, attrs){\r\n    return {\r\n        tag: tagName, // 标签名\r\n        type: 1, // 元素类型\r\n        children: [], // 孩子列表\r\n        attrs,  // 属性集合\r\n        parent: null  // 父元素\r\n    }\r\n}\r\n\r\n// 因为效率很低， 所以在开发部署的时候打包为最终的代码\r\nexport function parseHTML(html) {\r\n    let root;\r\n    let currentParent;\r\n    let stack = []\r\n    // 检验标签是否符合规则\r\n    function start(tagName, attrs){\r\n        let element = createASTElement(tagName, attrs)\r\n        if (!root){\r\n            root = element;\r\n        }\r\n        currentParent = element;\r\n        stack.push(element)\r\n    }\r\n\r\n    function end(tagName){ // 结尾标签处创建父子关系\r\n        let element = stack.pop()\r\n        currentParent = stack[stack.length - 1]\r\n        if (currentParent){ // 在闭合时可以知道这个标签的父标签\r\n            element.parent = currentParent\r\n            currentParent.children.push(element)\r\n        }\r\n    }\r\n    function chars(text){\r\n        text = text.trim()\r\n        if (text){\r\n            currentParent.children.push({\r\n                type: 3,\r\n                text\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    while (html){\r\n        let textEnd = html.indexOf('<');\r\n        if (textEnd === 0) {\r\n            // this is a tag, not a text\r\n            const startTagMatch = parseStartTag();\r\n            if (startTagMatch){\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n            const endTagMatch = html.match(endTag);\r\n            if (endTagMatch){\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1]);\r\n                continue\r\n            }\r\n\r\n            //TODO: v-bind ... <!DOCTYPE <!---> <br/>\r\n        }\r\n        // text\r\n        let text;\r\n        if (textEnd > 0){\r\n            text = html.substring(0, textEnd)\r\n            advance(text.length)\r\n            chars(text)\r\n        }\r\n    }\r\n\r\n    function advance(n){ // sub string\r\n        html = html.substring(n)\r\n    }\r\n\r\n    function parseStartTag(){\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length) // delete start tag\r\n            // is end tag\r\n            let end;\r\n            let attr;\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5]\r\n                })\r\n                advance(attr[0].length)\r\n            }\r\n            if (end){\r\n                advance(end[0].length)\r\n            }\r\n            return match\r\n        }\r\n    }\r\n\r\n    return root\r\n}","// <div id=\"app\" style=\"color: red\"> hello {{name}} <span>hello</span></div>\r\n// render(){\r\n//  return _c('div', {id: 'app', style: {color: 'red'}}, _v('hello' + _s(name)), _c('span', null, _v('hello')))\r\n// }\r\n// 元素 _c(tagName, attrs, element...)\r\n// 文本 _v(text)\r\n// 变量 _s(valueName)\r\n\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g  // {{}}\r\n\r\n// name: \"id\"\r\n// value: \"app\"\r\nfunction genProps(attrs) {\r\n    let str = ''\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i]\r\n        if (attr.name === 'style'){\r\n            let obj = {}\r\n            attr.value.replace(/\\s/g, '').split(\";\").forEach(item => {\r\n                let [key, value] = item.split(\":\")\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0, -1)}}`\r\n}\r\n\r\nfunction gen(node) {\r\n    if (node.type === 1) return generate(node)\r\n    else {\r\n        let text = node.text;\r\n        // normal text\r\n        // _v(\"hello {{name}}\") => _v('hello ' + _s(name))\r\n        if (! defaultTagRE.test(text)){\r\n            return `_v(${JSON.stringify(text)})` // 需要对{{}}处理\r\n        }\r\n        let tokens = [] // 存放每一段代码\r\n        let lasIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式，需要每次使用前置为0\r\n        let match, index; // 每次匹配到的结果\r\n        while(match = defaultTagRE.exec(text)){\r\n            index = match.index // 保存匹配到的索引\r\n            if (index > lasIndex){\r\n                tokens.push(JSON.stringify(text.slice(lasIndex, index)))\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`);\r\n            lasIndex = index + match[0].length\r\n        }\r\n        if (lasIndex < text.length) tokens.push(JSON.stringify(text.slice(lasIndex)));\r\n        return `_v(${tokens.join('+')})`\r\n    }\r\n}\r\n\r\nfunction getChildren(el) {\r\n    const children = el.children\r\n    if (children){ // 将所有转化后的child用,拼接\r\n        return children.map(child => gen(child)).join(',')\r\n    }\r\n}\r\n\r\nexport function generate(el) {\r\n    let children = getChildren(el)\r\n    let code = `_c('${el.tag}', ${\r\n        el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\r\n    }${\r\n        children? `,${children}` : ''\r\n    })`\r\n\r\n    return code\r\n}","import {parseHTML} from \"./parse\";\r\nimport {generate} from \"./generate\";\r\n\r\nexport function compilerToFunctions(template) {\r\n    // html template => render\r\n    // use ast to describe language, use ast product code\r\n    // virtual dom can describe grammar, but ast describe structure\r\n    // html -> ast -> render\r\n\r\n    // 1. html -> ats\r\n    let ast = parseHTML(template)\r\n    console.log(ast)\r\n    // 2. 优化静态节点\r\n\r\n    // 3. 通过这棵树，重新生成代码 -> render\r\n    let code = generate(ast);\r\n\r\n    // 4. 将字符串变为函数\r\n    // 通过with来限制取值范围，当调用时，能保证取到值\r\n    let render = new Function(`with(this){return ${code}}`);\r\n    return render\r\n}","export function patch(oldVnode, vnode){\r\n    // 默认初始化时 直接用虚拟节点创建出真实节点 替换掉老节点\r\n    if (oldVnode.nodeType === 1){\r\n        // 将虚拟节点转化为真实节点\r\n        console.log(oldVnode, vnode)\r\n        let el = createElm(vnode) // #app\r\n        let parentElm = oldVnode.parentNode;\r\n        // nextSibling下一个兄弟节点\r\n        parentElm.insertBefore(el, oldVnode.nextSibling) // 将当前真实元素插入到app后面\r\n        parentElm.removeChild(oldVnode)\r\n\r\n        return el\r\n    }else {\r\n        // 在更新时 拿老虚拟节点和新的虚拟节点做对比 将不同的地方更新真实的dom\r\n        // 既有渲染功能 也有更新功能\r\n\r\n        // 1. 比较两个元素的标签 标签不一样直接替换掉即可\r\n        if (oldVnode.tag !== vnode.tag) {\r\n            return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\r\n        }\r\n        // 2. 标签一样，文本节点的虚拟节点tag都为undefined\r\n        // 文本对比\r\n        if (!oldVnode.tag) {\r\n            if (oldVnode.text !== vnode.text) {\r\n                return oldVnode.el.textContent = vnode.text\r\n            }\r\n        }\r\n        // 3. 标签相同并且必须开始比对标签的属性和儿子\r\n        // 标签相同最好直接复用\r\n        let el = vnode.el = oldVnode.el // 复用老节点\r\n        // 更新属性: 用新的虚拟节点的属性和老的比较\r\n        updateProperties(vnode, oldVnode.data);\r\n\r\n        // 比较孩子\r\n        let oldChildren = oldVnode.children || [];\r\n        let newChildren = vnode.children || []\r\n        // 老的有孩子节点 新的也有孩子节点 diff算法\r\n        if (oldChildren.length > 0 && newChildren.length > 0){\r\n            updateChildren(oldChildren, newChildren, el)\r\n        }else if (oldChildren.length > 0 ){ // 老的有孩子节点 新的没有孩子节点\r\n            el.innerHTML = ''\r\n        }else if (newChildren.length > 0){  // 老的没有孩子节点 新的有孩子节点\r\n            for (let i = 0; i < newChildren.length; i++) {\r\n                let child = newChildren[i]\r\n                // 浏览器存在性能优化，不需要处理文档碎片\r\n                el.appendChild(createElm(child))\r\n            }\r\n        }\r\n        return el\r\n    }\r\n}\r\n\r\n// 儿子间的比较\r\nfunction updateChildren(oldChildren, newChildren, parent){\r\n    // vue中的diff算法做了很多优化\r\n    // dom中操作有很多常见的逻辑 将节点插入到孩子的头部、尾部、儿子倒叙正序\r\n    // vue2中采用的是双指针的方式\r\n\r\n    // 在尾部添加\r\n    // 4指针 比较\r\n    let oldStartIndex = 0\r\n    let oldStartVnode = oldChildren[oldStartIndex]\r\n    let oldEndIndex = oldChildren.length - 1\r\n    let oldEndVnode = oldChildren[oldEndIndex]\r\n\r\n    let newStartIndex = 0\r\n    let newStartVnode = newChildren[newStartIndex]\r\n    let newEndIndex = newChildren.length - 1\r\n    let newEndVnode = newChildren[newEndIndex]\r\n\r\n    // 比较谁先循环完毕 停止\r\n    while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex){\r\n        // oldStartIndex newStartIndex 如果两个是相同元素 对比孩子节点\r\n        if(isSameVnode(oldStartVnode, newStartVnode)){\r\n            patch(oldStartVnode, newStartVnode) // 更新属性 递归更新子节点\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n            newStartVnode = newChildren[++newStartIndex]\r\n        }else if (isSameVnode(oldEndVnode, newEndVnode)){\r\n            patch(oldEndVnode, newEndVnode)\r\n            oldEndVnode = oldChildren[--oldEndIndex]\r\n            newEndVnode = newChildren[--newEndIndex]\r\n        }\r\n        // 反转节点\r\n    }\r\n    if (newStartIndex <= newEndIndex){\r\n        for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n            // parent.appendChild(createElm(newChildren[i]))\r\n            // 向后插入ele为null\r\n            // 向前插入ele为当前向谁的前面插入\r\n            let ele = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el;\r\n            parent.insertBefore(createElm(newChildren[i]), ele)\r\n        }\r\n    }\r\n}\r\n\r\n// 标签相同 key相同 但是属性不相同是有可能的 这种情况只需要更新属性即可\r\nfunction isSameVnode(oldVnode, newVnode){\r\n    return (oldVnode.tag === newVnode.tag) && (oldVnode.key === newVnode.key)\r\n}\r\n\r\nexport function createElm(vnode){\r\n    let {tag, children, key, data, text} = vnode\r\n    if (typeof tag == 'string'){\r\n        // vnode.el可以用来更新\r\n        vnode.el = document.createElement(tag)\r\n        // 只有元素才有属性\r\n        updateProperties(vnode)\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        })\r\n    }else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction updateProperties(vnode, oldProps = {}) {\r\n    let newProps = vnode.data || {}\r\n    let el = vnode.el\r\n    // 老的有 新的没有 删除属性\r\n    for (let key in oldProps) {\r\n        if (!newProps[key]) {\r\n            el.removeAttribute(key)\r\n        }\r\n    }\r\n    // 新的有 直接用新的来更新\r\n\r\n    // 样式处理 style={color: red} => style={background: red}\r\n    let newStyle = newProps.style || {}\r\n    let oldStyle = oldProps.style || {}\r\n    for (let key in  oldStyle){\r\n        if (!newStyle[key]){\r\n            el.style[key] = ''\r\n        }\r\n    }\r\n    // 没有的属性直接删除\r\n    // 有的属性直接替换或增加\r\n\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let styleName in newProps.style) {\r\n                el.style[styleName] = newProps.style[styleName];\r\n            }\r\n        } else if (key === 'class') {\r\n            el.className = newProps.class;\r\n        } else {\r\n            el.setAttribute(key, newProps[key]);\r\n        }\r\n    }\r\n}\r\n","import {patch} from \"./vdom/patch\";\r\nimport Watcher from \"./observer/watcher\";\r\n\r\nexport function lifecycleMixin(Vue){\r\n    Vue.prototype._update = function (vnode){\r\n        const vm = this\r\n\r\n        // 用新的创建的元素替换掉原来的元素\r\n        vm.$el = patch(vm.$el, vnode)\r\n    }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n    vm.$el = el\r\n    // 调用render方法来渲染el属性\r\n\r\n    // 先调用render方法创建虚拟节点，再将虚拟节点渲染到页面上\r\n    // _render render => vnode\r\n    // _update vnode render to html\r\n\r\n    callHook(vm, 'beforeMount')\r\n    let updateComponent = () => {\r\n        vm._update(vm._render());\r\n    }\r\n    // watcher是用来渲染的\r\n    // true表示渲染watcher\r\n    let watcher = new Watcher(vm, updateComponent, ()=>{\r\n        callHook(vm, 'updated')\r\n    }, true)\r\n    // 将属性和watcher绑定在一起\r\n    callHook(vm, 'mounted')\r\n}\r\n\r\n// template -> ast -> render function (transform to vnode) -> vnode -> html\r\n// vue渲染流程: 初始化数据 -> 初始化数据 -> 将模板编译 -> render函数 -> 生成虚拟节点 -> 生成真实dom -> html\r\n\r\n\r\nexport function callHook(vm, hook){\r\n    const handlers = vm.$options[hook]\r\n    if (handlers){\r\n        for (let i = 0; i < handlers.length; i++) {\r\n            // 保证用户生命周期里面的this为当前实例\r\n            handlers[i].call(vm);\r\n        }\r\n    }\r\n}\r\n","import {initState} from \"./state\";\r\nimport {compilerToFunctions} from \"./compiler/index\";\r\nimport {callHook, mountComponent} from \"./lifecycle\";\r\nimport {mergeOptions} from \"./utils\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n\r\n        // 将用户传递的和全局的合并\r\n        // 这个方法可能会被子组件来调用, 子组件来调用Vue不为全局，而为继承之后的\r\n        vm.$options = mergeOptions(vm.constructor.options, options);\r\n\r\n        callHook(vm, 'beforeCreate')\r\n\r\n        // vue里面核心特征，响应式数据原理\r\n        // 初始化状态\r\n        initState(vm)\r\n\r\n        callHook(vm, 'created')\r\n\r\n        // 渲染逻辑 el === vm.$mount() 最终$mount来挂载\r\n        if (vm.$options.el){\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    };\r\n\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this\r\n        el = document.querySelector(el);\r\n\r\n        const options = vm.$options;\r\n        if (!options.render){\r\n            // no render, template to render\r\n            let template = options.template;\r\n            // no render and has el, use el\r\n            if (!template && el){\r\n                template = el.outerHTML;\r\n            }\r\n            // compile template (from origin template or el)\r\n            const render = compilerToFunctions(template);\r\n            // finally use render\r\n            options.render = render\r\n        }\r\n        // has render\r\n\r\n        // 需要挂载组件\r\n        mountComponent(vm, el);\r\n    }\r\n}","\r\nexport function renderMixin(Vue){\r\n    // 虚拟节点，用对象来描述dom\r\n    Vue.prototype._c = function () { // 创建元素\r\n        return createElement(...arguments)\r\n    }\r\n\r\n    Vue.prototype._s = function (val) { // stringify\r\n        // JSON.stringify(val)会导致所有元素节点进行依赖收集\r\n        return val == null ? '' : (typeof val === 'object') ? JSON.stringify(val) : val;\r\n    }\r\n\r\n    Vue.prototype._v = function (text) { // 创建文本元素\r\n        return createTextVnode(text)\r\n    }\r\n\r\n    Vue.prototype._render = function (){\r\n        const vm = this\r\n        const render = vm.$options.render\r\n        let vnode = render.call(vm)\r\n        return vnode\r\n    }\r\n}\r\n\r\n//  return _c('div', {id: 'app', style: {color: 'red'}}, _v('hello' + _s(name)), _c('span', null, _v('hello')))\r\n\r\nfunction createElement(tag, data = {}, ...children) {\r\n    return vnode(tag, data, data.key, children, undefined)\r\n}\r\n\r\nfunction createTextVnode(text){\r\n    return vnode(undefined, undefined, undefined, undefined,text)\r\n}\r\n\r\n// 操作正式dom消耗性能，vnode可以只更新不同，复用相同\r\nfunction vnode(tag, data, key, children, text){\r\n    // ast不用自定义属性\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n        // componentsInstance: ''\r\n        // 可以自定义描述对象\r\n    };\r\n}","import {mergeOptions} from \"../utils\";\r\n\r\nexport function initGlobalAPI(Vue){\r\n    Vue.options = {}\r\n\r\n    Vue.mixin = function (mixin){\r\n        // 如何实现两个对象的合并\r\n        this.options = mergeOptions(this.options, mixin)\r\n    }\r\n    // 生命周期的合并策略\r\n    // 生命周期必须合并为一个数组，而不是覆盖\r\n}","import {initMixin} from \"./init\";\r\nimport {lifecycleMixin} from \"./lifecycle\";\r\nimport {renderMixin} from \"./vdom/index\";\r\nimport {initGlobalAPI} from \"./initGlobalAPI/index\";\r\nimport {stateMixin} from \"./state\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options); //入口方法，做初始化操作\r\n}\r\n\r\n// 写成一个个插件进行原型扩展\r\n\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue) // 混合生命周期\r\nrenderMixin(Vue)\r\nstateMixin(Vue)\r\n\r\n// 初始化全局API\r\ninitGlobalAPI(Vue)\r\n\r\n\r\n\r\n// differ算法测试\r\nimport {compilerToFunctions} from \"./compiler/index\";\r\nimport {createElm, patch} from \"./vdom/patch\"\r\nlet vm1 = new Vue({\r\n    data: {\r\n        name: \"vm1---\"\r\n    }\r\n})\r\nlet render1 = compilerToFunctions(`<div>\r\n    <li key=\"A\" style=\"background-color: aquamarine\">A</li>\r\n    <li key=\"B\" style=\"background-color: red\">B</li>\r\n    <li key=\"C\" style=\"background-color: blue\">C</li>\r\n</div>`)\r\nlet vnode1 = render1.call(vm1)\r\ndocument.body.appendChild(createElm(vnode1))\r\n\r\nlet vm2 = new Vue({\r\n    data: {\r\n        name: \"vm2---\"\r\n    }\r\n})\r\nlet render2 = compilerToFunctions(`<div>\r\n    <li key=\"E\" style=\"background-color: green\">D</li>\r\n    <li key=\"A\" style=\"background-color: yellow\">F</li>\r\n    <li key=\"B\" style=\"background-color: red\">B</li>\r\n    <li key=\"C\" style=\"background-color: blue\">C</li>\r\n</div>`)\r\nlet vnode2 = render2.call(vm2)\r\n\r\nsetTimeout(()=>{\r\n    patch(vnode1, vnode2)\r\n}, 3000)\r\n\r\nexport default Vue\r\n"],"names":["oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","console","log","result","apply","arguments","inserted","ob","__ob__","slice","observeArray","dep","notify","proxy","vm","data","key","defineProperty","get","set","newValue","value","enumerable","configurable","writable","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","callbacks","flushCallbacks","length","cb","pop","pending","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","push","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Observer","isArray","__proto__","walk","keys","defineReactive","item","childDep","depend","Watcher","exprOrFn","user","isWatcher","deps","depsId","Set","getter","path","split","obj","i","queueWatcher","oldValue","call","has","add","addSub","queue","flushSchedulerQueue","run","initState","opts","$options","props","initData","computed","watch","initWatch","_data","handler","handle","createWatcher","$watch","stateMixin","Vue","$nextTick","immediate","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createASTElement","tagName","attrs","tag","type","children","parseHTML","html","root","currentParent","stack","start","element","end","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","replace","JSON","stringify","gen","node","generate","test","tokens","lasIndex","lastIndex","index","exec","join","getChildren","el","map","code","compilerToFunctions","template","ast","render","Function","patch","oldVnode","vnode","nodeType","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","updateProperties","oldChildren","newChildren","updateChildren","innerHTML","appendChild","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","isSameVnode","ele","newVnode","createElement","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","lifecycleMixin","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","_s","val","_v","createTextVnode","undefined","initGlobalAPI","mixin","vm1","render1","vnode1","body","vm2","render2","vnode2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA;EAEA;EACA,IAAIA,eAAe,GAAGC,KAAK,CAACC,SAA5B;EAEA;EACA;;EACO,IAAMC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcL,eAAd,CAArB;EAEP,IAAMM,OAAO,GAAG,CACZ,MADY,EAEZ,OAFY,EAGZ,SAHY,EAIZ,KAJY,EAKZ,MALY,EAMZ,QANY,EAOZ,SAPY,CAAhB;EAUAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACtBL,EAAAA,YAAY,CAACK,MAAD,CAAZ,GAAuB,YAAkB;EAAA,sCAALC,IAAK;EAALA,MAAAA,IAAK;EAAA;;EACrC;EAGAC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAJqC;EAMrC;;EACA,QAAMC,MAAM,GAAGZ,eAAe,CAACQ,MAAD,CAAf,CAAwBK,KAAxB,CAA8B,IAA9B,EAAoCC,SAApC,CAAf;EACA,QAAIC,QAAJ;EAEA,QAAIC,EAAE,GAAG,KAAKC,MAAd;;EACA,YAAQT,MAAR;EACI;EACA,WAAK,MAAL;EACA,WAAK,SAAL;EACIO,QAAAA,QAAQ,GAAGN,IAAX;EACA;;EACJ,WAAK,QAAL;EAAe;EACXA,QAAAA,IAAI,CAACS,KAAL,CAAW,CAAX,EADJ;;EAEI;EARR;;EAYA,QAAIH,QAAJ,EAAcC,EAAE,CAACG,YAAH,CAAgBJ,QAAhB;EACdC,IAAAA,EAAE,CAACI,GAAH,CAAOC,MAAP;EACA,WAAOT,MAAP;EACH,GA1BD;EA2BH,CA5BD;;ECpBO,SAASU,KAAT,CAAeC,EAAf,EAAmBC,IAAnB,EAAyBC,GAAzB,EAA8B;EACjCrB,EAAAA,MAAM,CAACsB,cAAP,CAAsBH,EAAtB,EAA0BE,GAA1B,EAA+B;EAC3BE,IAAAA,GAD2B,iBACtB;EACD,aAAOJ,EAAE,CAACC,IAAD,CAAF,CAASC,GAAT,CAAP;EACH,KAH0B;EAI3BG,IAAAA,GAJ2B,eAIvBC,QAJuB,EAId;EACTN,MAAAA,EAAE,CAACC,IAAD,CAAF,CAASC,GAAT,IAAgBI,QAAhB;EACH;EAN0B,GAA/B;EAQH;EAEM,SAASH,cAAT,CAAwBF,IAAxB,EAA8BC,GAA9B,EAAmCK,KAAnC,EAAyC;EAC5C1B,EAAAA,MAAM,CAACsB,cAAP,CAAsBF,IAAtB,EAA4BC,GAA5B,EAAgC;EAC5BM,IAAAA,UAAU,EAAE,KADgB;EACT;EACnBC,IAAAA,YAAY,EAAE,KAFc;EAEP;EACrBF,IAAAA,KAAK,EAALA,KAH4B;EAI5BG,IAAAA,QAAQ,EAAE;EAJkB,GAAhC;EAMH;EAED,IAAMC,eAAe,GAAG,CACpB,cADoB,EAEpB,SAFoB,EAGpB,aAHoB,EAIpB,SAJoB,EAKpB,cALoB,EAMpB,SANoB,EAOpB,eAPoB,EAQpB,WARoB,CAAxB;EAWA,IAAIC,MAAM,GAAG,EAAb;;EAEA,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,QAA9B,EAAuC;EACnC,MAAGA,QAAH,EAAY;EACR,QAAGD,SAAH,EAAa;EACT,aAAOA,SAAS,CAACE,MAAV,CAAiBD,QAAjB,CAAP;EACH,KAFD,MAEK;EACD,aAAO,CAACA,QAAD,CAAP;EACH;EACJ,GAND,MAMK;EACD,WAAOD,SAAP;EACH;EACJ;;EAEDH,eAAe,CAAC3B,OAAhB,CAAwB,UAAAiC,IAAI,EAAE;EAC1BL,EAAAA,MAAM,CAACK,IAAD,CAAN,GAAeJ,SAAf;EACH,CAFD;EAIO,SAASK,YAAT,CAAsBC,MAAtB,EAA8BC,KAA9B,EAAoC;EACvC,MAAMC,OAAO,GAAG,EAAhB;;EACA,OAAI,IAAInB,GAAR,IAAeiB,MAAf,EAAsB;EAClBG,IAAAA,UAAU,CAACpB,GAAD,CAAV;EACH;;EACD,OAAK,IAAIA,IAAT,IAAgBkB,KAAhB,EAAsB;EAClB,QAAI,CAACD,MAAM,CAACI,cAAP,CAAsBrB,IAAtB,CAAL,EAAgC;EAC5BoB,MAAAA,UAAU,CAACpB,IAAD,CAAV;EACH;EACJ,GATsC;;;EAWvC,WAASoB,UAAT,CAAoBpB,GAApB,EAAwB;EACpB,QAAIU,MAAM,CAACV,GAAD,CAAV,EAAgB;EACZ,aAAOmB,OAAO,CAACnB,GAAD,CAAP,GAAeU,MAAM,CAACV,GAAD,CAAN,CAAYiB,MAAM,CAACjB,GAAD,CAAlB,EAAyBkB,KAAK,CAAClB,GAAD,CAA9B,CAAtB;EACH;;EACD,QAAI,QAAOiB,MAAM,CAACjB,GAAD,CAAb,MAAuB,QAAvB,IAAmC,QAAQkB,KAAK,CAAClB,GAAD,CAAb,MAAuB,QAA9D,EAAuE;EACnEmB,MAAAA,OAAO,CAACnB,GAAD,CAAP,qCACOiB,MAAM,CAACjB,GAAD,CADb,GAEOkB,KAAK,CAAClB,GAAD,CAFZ;EAIH,KALD,MAKM,IAAIkB,KAAK,CAAClB,GAAD,CAAL,IAAc,IAAlB,EAAuB;EACzBmB,MAAAA,OAAO,CAACnB,GAAD,CAAP,GAAeiB,MAAM,CAACjB,GAAD,CAArB;EACH,KAFK,MAEA;EACFmB,MAAAA,OAAO,CAACnB,GAAD,CAAP,GAAekB,KAAK,CAAClB,GAAD,CAApB;EACH;EACJ;;EACD,SAAOmB,OAAP;EACH;EAED,IAAIG,SAAS,GAAG,EAAhB;;EAEA,SAASC,cAAT,GAA0B;EACtB,SAAOD,SAAS,CAACE,MAAjB,EAAwB;EACpB,QAAIC,EAAE,GAAGH,SAAS,CAACI,GAAV,EAAT;EACAD,IAAAA,EAAE;EACL;;EACDE,EAAAA,SAAO,GAAG,KAAV;EACH;;EACD,IAAIC,SAAJ;;EACA,IAAIC,OAAJ,EAAa;EACTD,EAAAA,SAAS,GAAG,qBAAM;EACdC,IAAAA,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBR,cAAvB;EACH,GAFD;EAGH,CAJD,MAIO,IAAIS,gBAAJ,EAAsB;EAAE;EAC3B,MAAIC,SAAO,GAAG,IAAID,gBAAJ,CAAqBT,cAArB,CAAd;EACA,MAAIW,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,CAAxB,CAAf;EACAH,EAAAA,SAAO,CAACA,OAAR,CAAgBC,QAAhB,EAA0B;EAACG,IAAAA,aAAa,EAAE;EAAhB,GAA1B;;EACAT,EAAAA,SAAS,GAAG,qBAAM;EACdM,IAAAA,QAAQ,CAACI,WAAT,GAAuB,CAAvB;EACH,GAFD;EAGH,CAPM,MAOD,IAAIC,YAAJ,EAAiB;EACnBX,EAAAA,SAAS,GAAG,qBAAI;EACZW,IAAAA,YAAY,CAAChB,cAAD,CAAZ;EACH,GAFD;EAGH,CAJK,MAIA;EACFK,EAAAA,SAAS,GAAG,qBAAI;EACZY,IAAAA,UAAU,CAACjB,cAAD,CAAV;EACH,GAFD;EAGH;;EACD,IAAII,SAAO,GAAG,KAAd;;EAEO,SAASc,QAAT,CAAkBhB,EAAlB,EAAqB;EACxBH,EAAAA,SAAS,CAACoB,IAAV,CAAejB,EAAf;;EACA,MAAI,CAACE,SAAL,EAAa;EACTC,IAAAA,SAAS;EACTD,IAAAA,SAAO,GAAG,IAAV;EACH;EACJ;;ECpHD,IAAIgB,IAAE,GAAG,CAAT;;MACMC;EAAM;EACR,iBAAc;EAAA;;EACV;EACA,SAAKC,IAAL,GAAY,EAAZ;EACA,SAAKF,EAAL,GAAUA,IAAE,EAAZ;EACH;;;;;aAGD,kBAAS;EACL;EACAC,MAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACH;;;aAED,gBAAOC,OAAP,EAAe;EACX,WAAKH,IAAL,CAAUH,IAAV,CAAeM,OAAf;EACH;;;aAED,kBAAQ;EACJ,WAAKH,IAAL,CAAU/D,OAAV,CAAkB,UAAAkE,OAAO;EAAA,eAAIA,OAAO,CAACC,MAAR,EAAJ;EAAA,OAAzB;EACH;;;;;EAIL;EACA;;;EAEAL,GAAG,CAACE,MAAJ,GAAa,IAAb;EAEO,SAASI,UAAT,CAAoBF,OAApB,EAA4B;EAC/BJ,EAAAA,GAAG,CAACE,MAAJ,GAAaE,OAAb;EACH;EAEM,SAASG,SAAT,GAAoB;EACvBP,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAb,CADuB;EAE1B;;MC9BKM;EACF,oBAAYrD,IAAZ,EAAkB;EAAA;;EACd,SAAKJ,GAAL,GAAW,IAAIiD,GAAJ,EAAX,CADc;;EAKd3C,IAAAA,cAAc,CAACF,IAAD,EAAO,QAAP,EAAkB,IAAlB,CAAd,CALc;EASd;;EACA,QAAIvB,KAAK,CAAC6E,OAAN,CAActD,IAAd,CAAJ,EAAyB;EACrB;EACA;EACAA,MAAAA,IAAI,CAACuD,SAAL,GAAiB5E,YAAjB,CAHqB;;EAKrB,WAAKgB,YAAL,CAAkBK,IAAlB;EACH,KAND,MAMM;EACF,WAAKwD,IAAL,CAAUxD,IAAV;EACH;EACJ;;;;aAED,cAAKA,IAAL,EAAW;EACP,UAAIyD,IAAI,GAAG7E,MAAM,CAAC6E,IAAP,CAAYzD,IAAZ,CAAX;EACAyD,MAAAA,IAAI,CAAC1E,OAAL,CAAa,UAAAkB,GAAG,EAAE;EACdyD,QAAAA,cAAc,CAAC1D,IAAD,EAAOC,GAAP,EAAYD,IAAI,CAACC,GAAD,CAAhB,CAAd,CADc;EAEjB,OAFD;EAGH;;;aAED,sBAAaD,IAAb,EAAmB;EACfA,MAAAA,IAAI,CAACjB,OAAL,CAAa,UAAA4E,IAAI,EAAI;EACjBzB,QAAAA,OAAO,CAACyB,IAAD,CAAP;EACH,OAFD;EAGH;;;;;;EAIL,SAASD,cAAT,CAAwB1D,IAAxB,EAA8BC,GAA9B,EAAmCK,KAAnC,EAA0C;EACtC;EACA,MAAIsD,QAAQ,GAAG1B,OAAO,CAAC5B,KAAD,CAAtB;EAEA,MAAIV,GAAG,GAAG,IAAIiD,GAAJ,EAAV,CAJsC;;EAMtCjE,EAAAA,MAAM,CAACsB,cAAP,CAAsBF,IAAtB,EAA4BC,GAA5B,EAAiC;EAC7BE,IAAAA,GAD6B,iBACxB;EAAE;EACHjB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBc,GAAxB;;EACA,UAAI4C,GAAG,CAACE,MAAR,EAAe;EACXnD,QAAAA,GAAG,CAACiE,MAAJ;;EACA,YAAID,QAAJ,EAAa;EACT;EACAA,UAAAA,QAAQ,CAAChE,GAAT,CAAaiE,MAAb;EACH;EACJ,OARA;;;EAUD,aAAOvD,KAAP;EACH,KAZ4B;EAa7BF,IAAAA,GAb6B,eAazBC,QAbyB,EAahB;EAAE;EACXnB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBc,GAAxB,EAA6BI,QAA7B;EACA,UAAIA,QAAQ,KAAKC,KAAjB,EAAwB;EACxB4B,MAAAA,OAAO,CAAC7B,QAAD,CAAP;EACAC,MAAAA,KAAK,GAAGD,QAAR;EAEAT,MAAAA,GAAG,CAACC,MAAJ;EACH;EApB4B,GAAjC;EAsBH;;;EAGM,SAASqC,OAAT,CAAiBlC,IAAjB,EAAuB;EAC1B;EAEA;EACA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;EAC3C;EACH;;EACD,MAAIA,IAAI,CAACP,MAAT,EAAiB,OAAOO,IAAP;EACjB,SAAO,IAAIqD,QAAJ,CAAarD,IAAb,CAAP;EACH;;EC/ED,IAAI4C,EAAE,GAAG,CAAT;;MAGMkB;EACF,mBAAY/D,EAAZ,EAAgBgE,QAAhB,EAA0BrC,EAA1B,EAA8BN,OAA9B,EAAuC;EAAA;;EACnC,SAAKrB,EAAL,GAAUA,EAAV;EACA,SAAKgE,QAAL,GAAgBA,QAAhB;EACA,SAAKrC,EAAL,GAAUA,EAAV;EACA,SAAKN,OAAL,GAAeA,OAAf;EACA,SAAK4C,IAAL,GAAY5C,OAAO,CAAC4C,IAApB,CALmC;;EAMnC,SAAKC,SAAL,GAAiB,OAAO7C,OAAP,KAAmB,SAApC;EACA,SAAKwB,EAAL,GAAUA,EAAE,EAAZ,CAPmC;;EAQnC,SAAKsB,IAAL,GAAY,EAAZ;EACA,SAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd,CATmC;EAYnC;;EACA,QAAI,OAAOL,QAAP,IAAmB,UAAvB,EAAmC;EAC/B,WAAKM,MAAL,GAAcN,QAAd;EACH,KAFD,MAEM;EACF,WAAKM,MAAL,GAAc,YAAW;EAAE;EACvB;EACA,YAAIC,IAAI,GAAGP,QAAQ,CAACQ,KAAT,CAAe,GAAf,CAAX;EACA,YAAIC,GAAG,GAAGzE,EAAV;;EACA,aAAK,IAAI0E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAAC7C,MAAzB,EAAiCgD,CAAC,EAAlC,EAAsC;EAClCD,UAAAA,GAAG,GAAGA,GAAG,CAACF,IAAI,CAACG,CAAD,CAAL,CAAT;EACH,SANoB;;;EAQrB,eAAOD,GAAP;EACH,OATD;EAUH,KA1BkC;;;EA6BnC,SAAKlE,KAAL,GAAa,KAAKH,GAAL,EAAb;EACH;;;;aAED,eAAM;EACFgD,MAAAA,UAAU,CAAC,IAAD,CAAV;EACA,UAAI/D,MAAM,GAAG,KAAKiF,MAAL,EAAb,CAFE;;EAGFjB,MAAAA,SAAS;EACT,aAAOhE,MAAP;EACH;;;aAED,kBAAS;EAEL;EACAsF,MAAAA,YAAY,CAAC,IAAD,CAAZ,CAHK;EAKR;;;aAED,eAAM;EACF;EACA,UAAIrE,QAAQ,GAAG,KAAKF,GAAL,EAAf,CAFE;;EAIF,UAAIwE,QAAQ,GAAG,KAAKrE,KAApB;EACA,WAAKA,KAAL,GAAaD,QAAb;;EACA,UAAI,KAAK2D,IAAT,EAAc;EACV,aAAKtC,EAAL,CAAQkD,IAAR,CAAa,KAAK7E,EAAlB,EAAsBM,QAAtB,EAAgCsE,QAAhC;EACH;EACJ;;;aAED,gBAAO/E,GAAP,EAAY;EACR,UAAIgD,EAAE,GAAGhD,GAAG,CAACgD,EAAb;;EACA,UAAI,CAAC,KAAKuB,MAAL,CAAYU,GAAZ,CAAgBjC,EAAhB,CAAL,EAA0B;EACtB,aAAKsB,IAAL,CAAUvB,IAAV,CAAe/C,GAAf;EACA,aAAKuE,MAAL,CAAYW,GAAZ,CAAgBlC,EAAhB;EACAhD,QAAAA,GAAG,CAACmF,MAAJ,CAAW,IAAX;EACH;EACJ;;;;;;;EAIL,IAAIC,KAAK,GAAG,EAAZ;EACA,IAAIH,GAAG,GAAG,EAAV;EACA,IAAIjD,OAAO,GAAG,KAAd;;EAEA,SAASqD,mBAAT,GAA+B;EAC3BD,EAAAA,KAAK,CAACjG,OAAN,CAAc,UAAAkE,OAAO,EAAI;EACrBA,IAAAA,OAAO,CAACiC,GAAR;;EACA,QAAI,CAACjC,OAAO,CAACe,IAAb,EAAkB;EACdf,MAAAA,OAAO,CAACvB,EAAR;EACH;EACJ,GALD;EAMAsD,EAAAA,KAAK,GAAG,EAAR;EACAH,EAAAA,GAAG,GAAG,EAAN;EACAjD,EAAAA,OAAO,GAAG,KAAV;EACH;;EAED,SAAS8C,YAAT,CAAsBzB,OAAtB,EAA+B;EAC3B,MAAML,EAAE,GAAGK,OAAO,CAACL,EAAnB;;EACA,MAAIiC,GAAG,CAACjC,EAAD,CAAH,IAAW,IAAf,EAAqB;EACjBoC,IAAAA,KAAK,CAACrC,IAAN,CAAWM,OAAX;EACA4B,IAAAA,GAAG,CAACjC,EAAD,CAAH,GAAU,IAAV,CAFiB;;EAKjB,QAAI,CAAChB,OAAL,EAAc;EAAE;EACZc,MAAAA,QAAQ,CAACuC,mBAAD,CAAR;EACArD,MAAAA,OAAO,GAAG,IAAV;EACH;EACJ;EACJ;;ECnGM,SAASuD,SAAT,CAAmBpF,EAAnB,EAAuB;EAC1B,MAAOqF,IAAI,GAAGrF,EAAE,CAACsF,QAAjB;;EAEA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACtG,OAAT,EAAkB;;EAGlB,MAAIsG,IAAI,CAACpF,IAAT,EAAe;EACXuF,IAAAA,QAAQ,CAACxF,EAAD,CAAR;EACH;;EACD,MAAIqF,IAAI,CAACI,QAAT,EAAmB;;EAGnB,MAAIJ,IAAI,CAACK,KAAT,EAAgB;EACZC,IAAAA,SAAS,CAAC3F,EAAD,CAAT;EACH;EACJ;;EAUD,SAASwF,QAAT,CAAkBxF,EAAlB,EAAsB;EAClB,MAAIC,IAAI,GAAGD,EAAE,CAACsF,QAAH,CAAYrF,IAAvB;EACAD,EAAAA,EAAE,CAAC4F,KAAH,GAAW3F,IAAI,GAAI,OAAOA,IAAP,IAAe,UAAf,GAA4BA,IAAI,CAAC4E,IAAL,CAAU7E,EAAV,CAA5B,GAA4CC,IAA/D,CAFkB;EAIlB;EAEA;EACA;;EACA,OAAK,IAAIC,GAAT,IAAgBD,IAAhB,EAAsB;EAClBF,IAAAA,KAAK,CAACC,EAAD,EAAK,OAAL,EAAcE,GAAd,CAAL;EACH;;EACDiC,EAAAA,OAAO,CAAClC,IAAD,CAAP;EACH;;EAID,SAAS0F,SAAT,CAAmB3F,EAAnB,EAAuB;EACnB,MAAI0F,KAAK,GAAG1F,EAAE,CAACsF,QAAH,CAAYI,KAAxB;;EADmB,6BAEVxF,GAFU;EAGf,QAAM2F,OAAO,GAAGH,KAAK,CAACxF,GAAD,CAArB;;EACA,QAAIxB,KAAK,CAAC6E,OAAN,CAAcsC,OAAd,CAAJ,EAA2B;EACvBA,MAAAA,OAAO,CAAC7G,OAAR,CAAgB,UAAA8G,MAAM,EAAI;EACtBC,QAAAA,aAAa,CAAC/F,EAAD,EAAKE,GAAL,EAAU4F,MAAV,CAAb;EACH,OAFD;EAGH,KAJD,MAIM;EACFC,MAAAA,aAAa,CAAC/F,EAAD,EAAKE,GAAL,EAAU2F,OAAV,CAAb,CADE;EAEL;EAVc;;EAEnB,OAAK,IAAI3F,GAAT,IAAgBwF,KAAhB,EAAsB;EAAA,UAAbxF,GAAa;EASrB;EACJ;;EAED,SAAS6F,aAAT,CAAuB/F,EAAvB,EAA2BgE,QAA3B,EAAqC6B,OAArC,EAA8CxE,OAA9C,EAAsD;EAAE;EACpD,MAAI,QAAOwE,OAAP,KAAkB,QAAtB,EAA+B;EAC3BxE,IAAAA,OAAO,GAAGwE,OAAV;EACAA,IAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB;EACH;;EACD,MAAI,OAAOA,OAAP,IAAkB,QAAtB,EAA+B;EAC3BA,IAAAA,OAAO,GAAG7F,EAAE,CAACsF,QAAH,CAAYvG,OAAZ,CAAoB8G,OAApB,CAAV;EACH,GAPiD;;;EASlD,SAAO7F,EAAE,CAACgG,MAAH,CAAUhC,QAAV,EAAoB6B,OAApB,EAA6BxE,OAA7B,CAAP;EACH;;EAEM,SAAS4E,UAAT,CAAoBC,GAApB,EAAwB;EAC3BA,EAAAA,GAAG,CAACvH,SAAJ,CAAcwH,SAAd,GAA0B,UAAUxE,EAAV,EAAc;EACpCgB,IAAAA,QAAQ,CAAChB,EAAD,CAAR;EACH,GAFD;;EAGAuE,EAAAA,GAAG,CAACvH,SAAJ,CAAcqH,MAAd,GAAuB,UAAUhC,QAAV,EAAoBrC,EAApB,EAAwBN,OAAxB,EAAiC;EACpD;EACA,IAAc,IAAI0C,OAAJ,CAAY,IAAZ,EAAkBC,QAAlB,EAA4BrC,EAA5B,oCAAoCN,OAApC;EAA6C4C,MAAAA,IAAI,EAAE;EAAnD;;EACd,QAAI5C,OAAO,IAAIA,OAAO,CAAC+E,SAAvB,EAAiC;EAC7BzE,MAAAA,EAAE;EACL;EACJ,GAND;EAOH;;ECrFD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA,IAAM0E,MAAM,iCAAZ;EACA;;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,YAAf;;EACA,IAAMI,SAAS,GAAG,2EAAlB;;EACA,IAAMC,aAAa,GAAG,YAAtB;EAGA;;EACA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAAyC;EACrC,SAAO;EACHC,IAAAA,GAAG,EAAEF,OADF;EACW;EACdG,IAAAA,IAAI,EAAE,CAFH;EAEM;EACTC,IAAAA,QAAQ,EAAE,EAHP;EAGW;EACdH,IAAAA,KAAK,EAALA,KAJG;EAIK;EACR3F,IAAAA,MAAM,EAAE,IALL;;EAAA,GAAP;EAOH;;;EAGM,SAAS+F,SAAT,CAAmBC,IAAnB,EAAyB;EAC5B,MAAIC,IAAJ;EACA,MAAIC,aAAJ;EACA,MAAIC,KAAK,GAAG,EAAZ,CAH4B;;EAK5B,WAASC,KAAT,CAAeV,OAAf,EAAwBC,KAAxB,EAA8B;EAC1B,QAAIU,OAAO,GAAGZ,gBAAgB,CAACC,OAAD,EAAUC,KAAV,CAA9B;;EACA,QAAI,CAACM,IAAL,EAAU;EACNA,MAAAA,IAAI,GAAGI,OAAP;EACH;;EACDH,IAAAA,aAAa,GAAGG,OAAhB;EACAF,IAAAA,KAAK,CAAC1E,IAAN,CAAW4E,OAAX;EACH;;EAED,WAASC,GAAT,CAAaZ,OAAb,EAAqB;EAAE;EACnB,QAAIW,OAAO,GAAGF,KAAK,CAAC1F,GAAN,EAAd;EACAyF,IAAAA,aAAa,GAAGC,KAAK,CAACA,KAAK,CAAC5F,MAAN,GAAe,CAAhB,CAArB;;EACA,QAAI2F,aAAJ,EAAkB;EAAE;EAChBG,MAAAA,OAAO,CAACrG,MAAR,GAAiBkG,aAAjB;EACAA,MAAAA,aAAa,CAACJ,QAAd,CAAuBrE,IAAvB,CAA4B4E,OAA5B;EACH;EACJ;;EACD,WAASE,KAAT,CAAeC,IAAf,EAAoB;EAChBA,IAAAA,IAAI,GAAGA,IAAI,CAACC,IAAL,EAAP;;EACA,QAAID,IAAJ,EAAS;EACLN,MAAAA,aAAa,CAACJ,QAAd,CAAuBrE,IAAvB,CAA4B;EACxBoE,QAAAA,IAAI,EAAE,CADkB;EAExBW,QAAAA,IAAI,EAAJA;EAFwB,OAA5B;EAIH;EACJ;;EAGD,SAAOR,IAAP,EAAY;EACR,QAAIU,OAAO,GAAGV,IAAI,CAACW,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACf;EACA,UAAME,aAAa,GAAGC,aAAa,EAAnC;;EACA,UAAID,aAAJ,EAAkB;EACdR,QAAAA,KAAK,CAACQ,aAAa,CAAClB,OAAf,EAAwBkB,aAAa,CAACjB,KAAtC,CAAL;EACA;EACH;;EACD,UAAMmB,WAAW,GAAGd,IAAI,CAACe,KAAL,CAAWzB,MAAX,CAApB;;EACA,UAAIwB,WAAJ,EAAgB;EACZE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAevG,MAAhB,CAAP;EACA+F,QAAAA,GAAG,CAACQ,WAAW,CAAC,CAAD,CAAZ,CAAH;EACA;EACH,OAZc;;EAelB,KAjBO;;;EAmBR,QAAIN,IAAI,SAAR;;EACA,QAAIE,OAAO,GAAG,CAAd,EAAgB;EACZF,MAAAA,IAAI,GAAGR,IAAI,CAACiB,SAAL,CAAe,CAAf,EAAkBP,OAAlB,CAAP;EACAM,MAAAA,OAAO,CAACR,IAAI,CAACjG,MAAN,CAAP;EACAgG,MAAAA,KAAK,CAACC,IAAD,CAAL;EACH;EACJ;;EAED,WAASQ,OAAT,CAAiBE,CAAjB,EAAmB;EAAE;EACjBlB,IAAAA,IAAI,GAAGA,IAAI,CAACiB,SAAL,CAAeC,CAAf,CAAP;EACH;;EAED,WAASL,aAAT,GAAwB;EACpB,QAAMT,KAAK,GAAGJ,IAAI,CAACe,KAAL,CAAW3B,YAAX,CAAd;;EACA,QAAIgB,KAAJ,EAAW;EACP,UAAMW,KAAK,GAAG;EACVrB,QAAAA,OAAO,EAAEU,KAAK,CAAC,CAAD,CADJ;EAEVT,QAAAA,KAAK,EAAE;EAFG,OAAd;EAIAqB,MAAAA,OAAO,CAACZ,KAAK,CAAC,CAAD,CAAL,CAAS7F,MAAV,CAAP,CALO;EAMP;;EACA,UAAI+F,IAAJ;;EACA,UAAIa,IAAJ;;EACA,aAAO,EAAEb,IAAG,GAAGN,IAAI,CAACe,KAAL,CAAWvB,aAAX,CAAR,MAAuC2B,IAAI,GAAGnB,IAAI,CAACe,KAAL,CAAWxB,SAAX,CAA9C,CAAP,EAA4E;EACxEwB,QAAAA,KAAK,CAACpB,KAAN,CAAYlE,IAAZ,CAAiB;EACb2F,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADG;EAEb/H,UAAAA,KAAK,EAAE+H,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFpB,SAAjB;EAIAH,QAAAA,OAAO,CAACG,IAAI,CAAC,CAAD,CAAJ,CAAQ5G,MAAT,CAAP;EACH;;EACD,UAAI+F,IAAJ,EAAQ;EACJU,QAAAA,OAAO,CAACV,IAAG,CAAC,CAAD,CAAH,CAAO/F,MAAR,CAAP;EACH;;EACD,aAAOwG,KAAP;EACH;EACJ;;EAED,SAAOd,IAAP;EACH;;EC/HD;EACA;EACA;EACA;EACA;EACA;EACA;EAEA,IAAMoB,YAAY,GAAG,0BAArB;EAEA;EACA;;EACA,SAASC,QAAT,CAAkB3B,KAAlB,EAAyB;EACrB,MAAI4B,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIhE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoC,KAAK,CAACpF,MAA1B,EAAkCgD,CAAC,EAAnC,EAAuC;EACnC,QAAI4D,IAAI,GAAGxB,KAAK,CAACpC,CAAD,CAAhB;;EACA,QAAI4D,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA0B;EAAA;EACtB,YAAI9D,GAAG,GAAG,EAAV;EACA6D,QAAAA,IAAI,CAAC/H,KAAL,CAAWoI,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,EAA8BnE,KAA9B,CAAoC,GAApC,EAAyCxF,OAAzC,CAAiD,UAAA4E,IAAI,EAAI;EACrD,4BAAmBA,IAAI,CAACY,KAAL,CAAW,GAAX,CAAnB;EAAA;EAAA,cAAKtE,GAAL;EAAA,cAAUK,KAAV;;EACAkE,UAAAA,GAAG,CAACvE,GAAD,CAAH,GAAWK,KAAX;EACH,SAHD;EAIA+H,QAAAA,IAAI,CAAC/H,KAAL,GAAakE,GAAb;EANsB;EAOzB;;EACDiE,IAAAA,GAAG,cAAOJ,IAAI,CAACC,IAAZ,cAAoBK,IAAI,CAACC,SAAL,CAAeP,IAAI,CAAC/H,KAApB,CAApB,MAAH;EACH;;EACD,oBAAWmI,GAAG,CAAC/I,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX;EACH;;EAED,SAASmJ,GAAT,CAAaC,IAAb,EAAmB;EACf,MAAIA,IAAI,CAAC/B,IAAL,KAAc,CAAlB,EAAqB,OAAOgC,QAAQ,CAACD,IAAD,CAAf,CAArB,KACK;EACD,QAAIpB,IAAI,GAAGoB,IAAI,CAACpB,IAAhB,CADC;EAGD;;EACA,QAAI,CAAEa,YAAY,CAACS,IAAb,CAAkBtB,IAAlB,CAAN,EAA8B;EAC1B,0BAAaiB,IAAI,CAACC,SAAL,CAAelB,IAAf,CAAb,OAD0B;EAE7B;;EACD,QAAIuB,MAAM,GAAG,EAAb,CAPC;;EAQD,QAAIC,QAAQ,GAAGX,YAAY,CAACY,SAAb,GAAyB,CAAxC,CARC;;EASD,QAAIlB,KAAJ,EAAWmB,KAAX,CATC;;EAUD,WAAMnB,KAAK,GAAGM,YAAY,CAACc,IAAb,CAAkB3B,IAAlB,CAAd,EAAsC;EAClC0B,MAAAA,KAAK,GAAGnB,KAAK,CAACmB,KAAd,CADkC;;EAElC,UAAIA,KAAK,GAAGF,QAAZ,EAAqB;EACjBD,QAAAA,MAAM,CAACtG,IAAP,CAAYgG,IAAI,CAACC,SAAL,CAAelB,IAAI,CAAChI,KAAL,CAAWwJ,QAAX,EAAqBE,KAArB,CAAf,CAAZ;EACH;;EACDH,MAAAA,MAAM,CAACtG,IAAP,cAAkBsF,KAAK,CAAC,CAAD,CAAL,CAASN,IAAT,EAAlB;EACAuB,MAAAA,QAAQ,GAAGE,KAAK,GAAGnB,KAAK,CAAC,CAAD,CAAL,CAASxG,MAA5B;EACH;;EACD,QAAIyH,QAAQ,GAAGxB,IAAI,CAACjG,MAApB,EAA4BwH,MAAM,CAACtG,IAAP,CAAYgG,IAAI,CAACC,SAAL,CAAelB,IAAI,CAAChI,KAAL,CAAWwJ,QAAX,CAAf,CAAZ;EAC5B,wBAAaD,MAAM,CAACK,IAAP,CAAY,GAAZ,CAAb;EACH;EACJ;;EAED,SAASC,WAAT,CAAqBC,EAArB,EAAyB;EACrB,MAAMxC,QAAQ,GAAGwC,EAAE,CAACxC,QAApB;;EACA,MAAIA,QAAJ,EAAa;EAAE;EACX,WAAOA,QAAQ,CAACyC,GAAT,CAAa,UAAAtI,KAAK;EAAA,aAAI0H,GAAG,CAAC1H,KAAD,CAAP;EAAA,KAAlB,EAAkCmI,IAAlC,CAAuC,GAAvC,CAAP;EACH;EACJ;;EAEM,SAASP,QAAT,CAAkBS,EAAlB,EAAsB;EACzB,MAAIxC,QAAQ,GAAGuC,WAAW,CAACC,EAAD,CAA1B;EACA,MAAIE,IAAI,iBAAUF,EAAE,CAAC1C,GAAb,gBACJ0C,EAAE,CAAC3C,KAAH,CAASpF,MAAT,aAAqB+G,QAAQ,CAACgB,EAAE,CAAC3C,KAAJ,CAA7B,IAA4C,WADxC,SAGJG,QAAQ,cAAMA,QAAN,IAAmB,EAHvB,MAAR;EAMA,SAAO0C,IAAP;EACH;;ECnEM,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;EAC1C;EACA;EACA;EACA;EAEA;EACA,MAAIC,GAAG,GAAG5C,SAAS,CAAC2C,QAAD,CAAnB;EACA1K,EAAAA,OAAO,CAACC,GAAR,CAAY0K,GAAZ,EAR0C;EAW1C;;EACA,MAAIH,IAAI,GAAGX,QAAQ,CAACc,GAAD,CAAnB,CAZ0C;EAe1C;;EACA,MAAIC,MAAM,GAAG,IAAIC,QAAJ,6BAAkCL,IAAlC,OAAb;EACA,SAAOI,MAAP;EACH;;ECrBM,SAASE,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAA+B;EAClC;EACA,MAAID,QAAQ,CAACE,QAAT,KAAsB,CAA1B,EAA4B;EACxB;EACAjL,IAAAA,OAAO,CAACC,GAAR,CAAY8K,QAAZ,EAAsBC,KAAtB;EACA,QAAIV,EAAE,GAAGY,SAAS,CAACF,KAAD,CAAlB,CAHwB;;EAIxB,QAAIG,SAAS,GAAGJ,QAAQ,CAACK,UAAzB,CAJwB;;EAMxBD,IAAAA,SAAS,CAACE,YAAV,CAAuBf,EAAvB,EAA2BS,QAAQ,CAACO,WAApC,EANwB;;EAOxBH,IAAAA,SAAS,CAACI,WAAV,CAAsBR,QAAtB;EAEA,WAAOT,EAAP;EACH,GAVD,MAUM;EACF;EACA;EAEA;EACA,QAAIS,QAAQ,CAACnD,GAAT,KAAiBoD,KAAK,CAACpD,GAA3B,EAAgC;EAC5B,aAAOmD,QAAQ,CAACT,EAAT,CAAYc,UAAZ,CAAuBI,YAAvB,CAAoCN,SAAS,CAACF,KAAD,CAA7C,EAAsDD,QAAQ,CAACT,EAA/D,CAAP;EACH,KAPC;EASF;;;EACA,QAAI,CAACS,QAAQ,CAACnD,GAAd,EAAmB;EACf,UAAImD,QAAQ,CAACvC,IAAT,KAAkBwC,KAAK,CAACxC,IAA5B,EAAkC;EAC9B,eAAOuC,QAAQ,CAACT,EAAT,CAAYjH,WAAZ,GAA0B2H,KAAK,CAACxC,IAAvC;EACH;EACJ,KAdC;EAgBF;;;EACA,QAAI8B,GAAE,GAAGU,KAAK,CAACV,EAAN,GAAWS,QAAQ,CAACT,EAA7B,CAjBE;EAkBF;;;EACAmB,IAAAA,gBAAgB,CAACT,KAAD,EAAQD,QAAQ,CAACjK,IAAjB,CAAhB,CAnBE;;EAsBF,QAAI4K,WAAW,GAAGX,QAAQ,CAACjD,QAAT,IAAqB,EAAvC;EACA,QAAI6D,WAAW,GAAGX,KAAK,CAAClD,QAAN,IAAkB,EAApC,CAvBE;;EAyBF,QAAI4D,WAAW,CAACnJ,MAAZ,GAAqB,CAArB,IAA0BoJ,WAAW,CAACpJ,MAAZ,GAAqB,CAAnD,EAAqD;EACjDqJ,MAAAA,cAAc,CAACF,WAAD,EAAcC,WAAd,EAA2BrB,GAA3B,CAAd;EACH,KAFD,MAEM,IAAIoB,WAAW,CAACnJ,MAAZ,GAAqB,CAAzB,EAA4B;EAAE;EAChC+H,MAAAA,GAAE,CAACuB,SAAH,GAAe,EAAf;EACH,KAFK,MAEA,IAAIF,WAAW,CAACpJ,MAAZ,GAAqB,CAAzB,EAA2B;EAAG;EAChC,WAAK,IAAIgD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoG,WAAW,CAACpJ,MAAhC,EAAwCgD,CAAC,EAAzC,EAA6C;EACzC,YAAItD,KAAK,GAAG0J,WAAW,CAACpG,CAAD,CAAvB,CADyC;;EAGzC+E,QAAAA,GAAE,CAACwB,WAAH,CAAeZ,SAAS,CAACjJ,KAAD,CAAxB;EACH;EACJ;;EACD,WAAOqI,GAAP;EACH;EACJ;;EAGD,SAASsB,cAAT,CAAwBF,WAAxB,EAAqCC,WAArC,EAAkD3J,MAAlD,EAAyD;EACrD;EACA;EACA;EAEA;EACA;EACA,MAAI+J,aAAa,GAAG,CAApB;EACA,MAAIC,aAAa,GAAGN,WAAW,CAACK,aAAD,CAA/B;EACA,MAAIE,WAAW,GAAGP,WAAW,CAACnJ,MAAZ,GAAqB,CAAvC;EACA,MAAI2J,WAAW,GAAGR,WAAW,CAACO,WAAD,CAA7B;EAEA,MAAIE,aAAa,GAAG,CAApB;EACA,MAAIC,aAAa,GAAGT,WAAW,CAACQ,aAAD,CAA/B;EACA,MAAIE,WAAW,GAAGV,WAAW,CAACpJ,MAAZ,GAAqB,CAAvC;EACA,MAAI+J,WAAW,GAAGX,WAAW,CAACU,WAAD,CAA7B,CAfqD;;EAkBrD,SAAMN,aAAa,IAAIE,WAAjB,IAAgCE,aAAa,IAAIE,WAAvD,EAAmE;EAC/D;EACA,QAAGE,WAAW,CAACP,aAAD,EAAgBI,aAAhB,CAAd,EAA6C;EACzCtB,MAAAA,KAAK,CAACkB,aAAD,EAAgBI,aAAhB,CAAL,CADyC;;EAEzCJ,MAAAA,aAAa,GAAGN,WAAW,CAAC,EAAEK,aAAH,CAA3B;EACAK,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEQ,aAAH,CAA3B;EACH,KAJD,MAIM,IAAII,WAAW,CAACL,WAAD,EAAcI,WAAd,CAAf,EAA0C;EAC5CxB,MAAAA,KAAK,CAACoB,WAAD,EAAcI,WAAd,CAAL;EACAJ,MAAAA,WAAW,GAAGR,WAAW,CAAC,EAAEO,WAAH,CAAzB;EACAK,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEU,WAAH,CAAzB;EACH,KAV8D;;EAYlE;;EACD,MAAIF,aAAa,IAAIE,WAArB,EAAiC;EAC7B,SAAK,IAAI9G,CAAC,GAAG4G,aAAb,EAA4B5G,CAAC,IAAI8G,WAAjC,EAA8C9G,CAAC,EAA/C,EAAmD;EAC/C;EACA;EACA;EACA,UAAIiH,GAAG,GAAGb,WAAW,CAACU,WAAW,GAAG,CAAf,CAAX,IAAgC,IAAhC,GAAuC,IAAvC,GAA8CV,WAAW,CAACU,WAAW,GAAG,CAAf,CAAX,CAA6B/B,EAArF;EACAtI,MAAAA,MAAM,CAACqJ,YAAP,CAAoBH,SAAS,CAACS,WAAW,CAACpG,CAAD,CAAZ,CAA7B,EAA+CiH,GAA/C;EACH;EACJ;EACJ;;;EAGD,SAASD,WAAT,CAAqBxB,QAArB,EAA+B0B,QAA/B,EAAwC;EACpC,SAAQ1B,QAAQ,CAACnD,GAAT,KAAiB6E,QAAQ,CAAC7E,GAA3B,IAAoCmD,QAAQ,CAAChK,GAAT,KAAiB0L,QAAQ,CAAC1L,GAArE;EACH;;EAEM,SAASmK,SAAT,CAAmBF,KAAnB,EAAyB;EAC5B,MAAKpD,GAAL,GAAuCoD,KAAvC,CAAKpD,GAAL;EAAA,MAAUE,QAAV,GAAuCkD,KAAvC,CAAUlD,QAAV;EAAA,MAAuCkD,KAAvC,CAAoBjK,GAApB;EAAA,MAAuCiK,KAAvC,CAAyBlK,IAAzB;EAAA,UAA+B0H,IAA/B,GAAuCwC,KAAvC,CAA+BxC;;EAC/B,MAAI,OAAOZ,GAAP,IAAc,QAAlB,EAA2B;EACvB;EACAoD,IAAAA,KAAK,CAACV,EAAN,GAAWpH,QAAQ,CAACwJ,aAAT,CAAuB9E,GAAvB,CAAX,CAFuB;;EAIvB6D,IAAAA,gBAAgB,CAACT,KAAD,CAAhB;EACAlD,IAAAA,QAAQ,CAACjI,OAAT,CAAiB,UAAAoC,KAAK,EAAI;EACtB+I,MAAAA,KAAK,CAACV,EAAN,CAASwB,WAAT,CAAqBZ,SAAS,CAACjJ,KAAD,CAA9B;EACH,KAFD;EAGH,GARD,MAQM;EACF+I,IAAAA,KAAK,CAACV,EAAN,GAAWpH,QAAQ,CAACC,cAAT,CAAwBqF,IAAxB,CAAX;EACH;;EACD,SAAOwC,KAAK,CAACV,EAAb;EACH;;EAED,SAASmB,gBAAT,CAA0BT,KAA1B,EAAgD;EAAA,MAAf2B,QAAe,uEAAJ,EAAI;EAC5C,MAAIC,QAAQ,GAAG5B,KAAK,CAAClK,IAAN,IAAc,EAA7B;EACA,MAAIwJ,EAAE,GAAGU,KAAK,CAACV,EAAf,CAF4C;;EAI5C,OAAK,IAAIvJ,GAAT,IAAgB4L,QAAhB,EAA0B;EACtB,QAAI,CAACC,QAAQ,CAAC7L,GAAD,CAAb,EAAoB;EAChBuJ,MAAAA,EAAE,CAACuC,eAAH,CAAmB9L,GAAnB;EACH;EACJ,GAR2C;EAW5C;;;EACA,MAAI+L,QAAQ,GAAGF,QAAQ,CAACG,KAAT,IAAkB,EAAjC;EACA,MAAIC,QAAQ,GAAGL,QAAQ,CAACI,KAAT,IAAkB,EAAjC;;EACA,OAAK,IAAIhM,IAAT,IAAiBiM,QAAjB,EAA0B;EACtB,QAAI,CAACF,QAAQ,CAAC/L,IAAD,CAAb,EAAmB;EACfuJ,MAAAA,EAAE,CAACyC,KAAH,CAAShM,IAAT,IAAgB,EAAhB;EACH;EACJ,GAlB2C;EAoB5C;;;EAEA,OAAK,IAAIA,KAAT,IAAgB6L,QAAhB,EAA0B;EACtB,QAAI7L,KAAG,KAAK,OAAZ,EAAqB;EACjB,WAAK,IAAIkM,SAAT,IAAsBL,QAAQ,CAACG,KAA/B,EAAsC;EAClCzC,QAAAA,EAAE,CAACyC,KAAH,CAASE,SAAT,IAAsBL,QAAQ,CAACG,KAAT,CAAeE,SAAf,CAAtB;EACH;EACJ,KAJD,MAIO,IAAIlM,KAAG,KAAK,OAAZ,EAAqB;EACxBuJ,MAAAA,EAAE,CAAC4C,SAAH,GAAeN,QAAQ,SAAvB;EACH,KAFM,MAEA;EACHtC,MAAAA,EAAE,CAAC6C,YAAH,CAAgBpM,KAAhB,EAAqB6L,QAAQ,CAAC7L,KAAD,CAA7B;EACH;EACJ;EACJ;;EClJM,SAASqM,cAAT,CAAwBrG,GAAxB,EAA4B;EAC/BA,EAAAA,GAAG,CAACvH,SAAJ,CAAc6N,OAAd,GAAwB,UAAUrC,KAAV,EAAgB;EACpC,QAAMnK,EAAE,GAAG,IAAX,CADoC;;EAIpCA,IAAAA,EAAE,CAACyM,GAAH,GAASxC,KAAK,CAACjK,EAAE,CAACyM,GAAJ,EAAStC,KAAT,CAAd;EACH,GALD;EAMH;EAEM,SAASuC,cAAT,CAAwB1M,EAAxB,EAA4ByJ,EAA5B,EAAgC;EACnCzJ,EAAAA,EAAE,CAACyM,GAAH,GAAShD,EAAT,CADmC;EAInC;EACA;EACA;;EAEAkD,EAAAA,QAAQ,CAAC3M,EAAD,EAAK,aAAL,CAAR;;EACA,MAAI4M,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EACxB5M,IAAAA,EAAE,CAACwM,OAAH,CAAWxM,EAAE,CAAC6M,OAAH,EAAX;EACH,GAFD,CATmC;EAanC;;;EACA,EAAc,IAAI9I,OAAJ,CAAY/D,EAAZ,EAAgB4M,eAAhB,EAAiC,YAAI;EAC/CD,IAAAA,QAAQ,CAAC3M,EAAD,EAAK,SAAL,CAAR;EACH,GAFa,EAEX,IAFW,EAdqB;;EAkBnC2M,EAAAA,QAAQ,CAAC3M,EAAD,EAAK,SAAL,CAAR;EACH;EAGD;;EAGO,SAAS2M,QAAT,CAAkB3M,EAAlB,EAAsBiB,IAAtB,EAA2B;EAC9B,MAAM6L,QAAQ,GAAG9M,EAAE,CAACsF,QAAH,CAAYrE,IAAZ,CAAjB;;EACA,MAAI6L,QAAJ,EAAa;EACT,SAAK,IAAIpI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoI,QAAQ,CAACpL,MAA7B,EAAqCgD,CAAC,EAAtC,EAA0C;EACtC;EACAoI,MAAAA,QAAQ,CAACpI,CAAD,CAAR,CAAYG,IAAZ,CAAiB7E,EAAjB;EACH;EACJ;EACJ;;ECxCM,SAAS+M,SAAT,CAAmB7G,GAAnB,EAAwB;EAC3BA,EAAAA,GAAG,CAACvH,SAAJ,CAAcqO,KAAd,GAAsB,UAAU3L,OAAV,EAAmB;EACrC,QAAMrB,EAAE,GAAG,IAAX,CADqC;EAIrC;;EACAA,IAAAA,EAAE,CAACsF,QAAH,GAAcpE,YAAY,CAAClB,EAAE,CAACiN,WAAH,CAAe5L,OAAhB,EAAyBA,OAAzB,CAA1B;EAEAsL,IAAAA,QAAQ,CAAC3M,EAAD,EAAK,cAAL,CAAR,CAPqC;EAUrC;;EACAoF,IAAAA,SAAS,CAACpF,EAAD,CAAT;EAEA2M,IAAAA,QAAQ,CAAC3M,EAAD,EAAK,SAAL,CAAR,CAbqC;;EAgBrC,QAAIA,EAAE,CAACsF,QAAH,CAAYmE,EAAhB,EAAmB;EACfzJ,MAAAA,EAAE,CAACkN,MAAH,CAAUlN,EAAE,CAACsF,QAAH,CAAYmE,EAAtB;EACH;EACJ,GAnBD;;EAqBAvD,EAAAA,GAAG,CAACvH,SAAJ,CAAcuO,MAAd,GAAuB,UAAUzD,EAAV,EAAc;EACjC,QAAMzJ,EAAE,GAAG,IAAX;EACAyJ,IAAAA,EAAE,GAAGpH,QAAQ,CAAC8K,aAAT,CAAuB1D,EAAvB,CAAL;EAEA,QAAMpI,OAAO,GAAGrB,EAAE,CAACsF,QAAnB;;EACA,QAAI,CAACjE,OAAO,CAAC0I,MAAb,EAAoB;EAChB;EACA,UAAIF,QAAQ,GAAGxI,OAAO,CAACwI,QAAvB,CAFgB;;EAIhB,UAAI,CAACA,QAAD,IAAaJ,EAAjB,EAAoB;EAChBI,QAAAA,QAAQ,GAAGJ,EAAE,CAAC2D,SAAd;EACH,OANe;;;EAQhB,UAAMrD,MAAM,GAAGH,mBAAmB,CAACC,QAAD,CAAlC,CARgB;;EAUhBxI,MAAAA,OAAO,CAAC0I,MAAR,GAAiBA,MAAjB;EACH,KAhBgC;EAmBjC;;;EACA2C,IAAAA,cAAc,CAAC1M,EAAD,EAAKyJ,EAAL,CAAd;EACH,GArBD;EAsBH;;EChDM,SAAS4D,WAAT,CAAqBnH,GAArB,EAAyB;EAC5B;EACAA,EAAAA,GAAG,CAACvH,SAAJ,CAAc2O,EAAd,GAAmB,YAAY;EAAE;EAC7B,WAAOzB,aAAa,MAAb,SAAiBtM,SAAjB,CAAP;EACH,GAFD;;EAIA2G,EAAAA,GAAG,CAACvH,SAAJ,CAAc4O,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAAE;EAChC;EACA,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAoB,QAAOA,GAAP,MAAe,QAAhB,GAA4B5E,IAAI,CAACC,SAAL,CAAe2E,GAAf,CAA5B,GAAkDA,GAA5E;EACH,GAHD;;EAKAtH,EAAAA,GAAG,CAACvH,SAAJ,CAAc8O,EAAd,GAAmB,UAAU9F,IAAV,EAAgB;EAAE;EACjC,WAAO+F,eAAe,CAAC/F,IAAD,CAAtB;EACH,GAFD;;EAIAzB,EAAAA,GAAG,CAACvH,SAAJ,CAAckO,OAAd,GAAwB,YAAW;EAC/B,QAAM7M,EAAE,GAAG,IAAX;EACA,QAAM+J,MAAM,GAAG/J,EAAE,CAACsF,QAAH,CAAYyE,MAA3B;EACA,QAAII,KAAK,GAAGJ,MAAM,CAAClF,IAAP,CAAY7E,EAAZ,CAAZ;EACA,WAAOmK,KAAP;EACH,GALD;EAMH;;EAID,SAAS0B,aAAT,CAAuB9E,GAAvB,EAAoD;EAAA,MAAxB9G,IAAwB,uEAAjB,EAAiB;;EAAA,oCAAVgH,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAChD,SAAOkD,KAAK,CAACpD,GAAD,EAAM9G,IAAN,EAAYA,IAAI,CAACC,GAAjB,EAAsB+G,QAAtB,EAAgC0G,SAAhC,CAAZ;EACH;;EAED,SAASD,eAAT,CAAyB/F,IAAzB,EAA8B;EAC1B,SAAOwC,KAAK,CAACwD,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA4ChG,IAA5C,CAAZ;EACH;;;EAGD,SAASwC,KAAT,CAAepD,GAAf,EAAoB9G,IAApB,EAA0BC,GAA1B,EAA+B+G,QAA/B,EAAyCU,IAAzC,EAA8C;EAC1C;EACA,SAAO;EACHZ,IAAAA,GAAG,EAAHA,GADG;EAEH9G,IAAAA,IAAI,EAAJA,IAFG;EAGHC,IAAAA,GAAG,EAAHA,GAHG;EAIH+G,IAAAA,QAAQ,EAARA,QAJG;EAKHU,IAAAA,IAAI,EAAJA,IALG;EAOH;;EAPG,GAAP;EASH;;EC5CM,SAASiG,aAAT,CAAuB1H,GAAvB,EAA2B;EAC9BA,EAAAA,GAAG,CAAC7E,OAAJ,GAAc,EAAd;;EAEA6E,EAAAA,GAAG,CAAC2H,KAAJ,GAAY,UAAUA,KAAV,EAAgB;EACxB;EACA,SAAKxM,OAAL,GAAeH,YAAY,CAAC,KAAKG,OAAN,EAAewM,KAAf,CAA3B;EACH,GAHD,CAH8B;EAQ9B;;EACH;;ECLD,SAAS3H,GAAT,CAAa7E,OAAb,EAAsB;EAClB,OAAK2L,KAAL,CAAW3L,OAAX,EADkB;;EAErB;;;EAID0L,SAAS,CAAC7G,GAAD,CAAT;EACAqG,cAAc,CAACrG,GAAD,CAAd;;EACAmH,WAAW,CAACnH,GAAD,CAAX;EACAD,UAAU,CAACC,GAAD,CAAV;;EAGA0H,aAAa,CAAC1H,GAAD,CAAb;EAOA,IAAI4H,GAAG,GAAG,IAAI5H,GAAJ,CAAQ;EACdjG,EAAAA,IAAI,EAAE;EACFsI,IAAAA,IAAI,EAAE;EADJ;EADQ,CAAR,CAAV;EAKA,IAAIwF,OAAO,GAAGnE,mBAAmB,uMAAjC;EAKA,IAAIoE,MAAM,GAAGD,OAAO,CAAClJ,IAAR,CAAaiJ,GAAb,CAAb;EACAzL,QAAQ,CAAC4L,IAAT,CAAchD,WAAd,CAA0BZ,SAAS,CAAC2D,MAAD,CAAnC;EAEA,IAAIE,GAAG,GAAG,IAAIhI,GAAJ,CAAQ;EACdjG,EAAAA,IAAI,EAAE;EACFsI,IAAAA,IAAI,EAAE;EADJ;EADQ,CAAR,CAAV;EAKA,IAAI4F,OAAO,GAAGvE,mBAAmB,+PAAjC;EAMA,IAAIwE,MAAM,GAAGD,OAAO,CAACtJ,IAAR,CAAaqJ,GAAb,CAAb;EAEAxL,UAAU,CAAC,YAAI;EACXuH,EAAAA,KAAK,CAAC+D,MAAD,EAASI,MAAT,CAAL;EACH,CAFS,EAEP,IAFO,CAAV;;;;;;;;"}